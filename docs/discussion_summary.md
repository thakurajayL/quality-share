*`This document is a living log of key decisions and discussion points from the development process.`*

# Discussion Summary

This document summarizes the key decisions and discussions during the architecture design process.

## High Level Architecture

*   **Architectural Style:** Static Site Architecture using Hugo, GitHub Pages, and GitHub Actions.
*   **Key Features:** AI-assisted content curation pipeline with LangChain and Python.
*   **Repository:** Monorepo.
*   **Analytics:** Google Analytics with privacy considerations (cookie consent, GA4 Consent Mode).

## Agile Team Perspective & Limitations

*   **QA:** Acknowledged limitations of GitHub Pages for PR previews. Decided to defer advanced QA features to post-MVP.
*   **Cost:** The cost of the AI pipeline is an unknown. A cost monitoring strategy will be implemented.
*   **Analytics & Privacy:** The use of Google Analytics introduces a privacy compliance burden. A cookie consent banner and GA4 Consent Mode will be implemented.
*   **Educational Goal:** The project's architecture is intentionally designed to be an educational showcase.

## Data Models

*   **Decision:** A single, unified `ContentItem` model will be used to represent all types of content (blog posts, research papers, etc.).
*   **Rationale:** This approach provides flexibility and scalability, allowing for the easy addition of new content types in the future.
*   **Implementation:** Fields specific to a certain content type (e.g., `doi` for research papers) will be optional/nullable.

## Components & Workflow

*   **Decision:** A PR-driven workflow will be used for content curation.
*   **AI Curation Pipeline:** This component will discover new content and automatically create Pull Requests with the content formatted as Markdown files.
*   **Human Curation:** The user (as the librarian) will review, edit, and approve content by merging Pull Requests.
*   **Static Site & CI/CD Workflow:** This component is triggered on PR merge. It updates a SQLite database with the new content and then uses Hugo to build and deploy the site.
*   **SQLite Role:** The database will be used to track visited URLs (to prevent duplicates) and to hold the curated content for the Hugo build process.

## Manual Content Submission

*   **Requirement:** A workflow was designed to allow the librarian to manually add content they discover themselves.
*   **Implementation:** A command-line script will be created that takes a URL as input. The script will then trigger the same processing and PR-creation workflow as the automated pipeline.
*   **Feature:** The script will automatically detect the content type (e.g., blog vs. research paper) but will also include a flag to allow the user to manually override this detection.

## Hugo Data File Generation

*   **Decision:** To enable Hugo to display curated articles, the pipeline will generate a `site/data/articles.json` file from the `published_content` table in the SQLite database.
*   **Rationale:** Hugo cannot directly query SQLite. Generating a JSON data file is the Hugo-idiomatic way to provide structured data to the site.
*   **Workflow:** This `articles.json` file will be auto-generated by a Python script within the CI/CD pipeline after a content PR is merged and the database is updated (Story 2.8).

## Known UI/UX Issues (MVP)

*   **Homepage Header Appearance:** The large black header section on the homepage appears empty after removing the redundant site title. This is a theme-related aesthetic issue that will be addressed post-MVP.

## Recent Discussions (2025-10-20)

*   **Article Display Order:** Confirmed that the website displays articles with the most recent original publication date at the top. A new requirement was identified to add a "New" badge to recently curated articles to ensure they are visible to returning users, even if their original publication date is old. A new user story (3.13) has been created for this.
*   **Sharing Links:** Confirmed that specific sections of the website (e.g., `/decisions/`) have their own unique URLs and can be shared directly. It was also noted that individual articles do not yet have their own dedicated pages or links, and a new user story (3.12) has been created to address this.